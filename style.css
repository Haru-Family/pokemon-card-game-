:root{
  --bg:#0b1020;
  --text:#e9eeff;
  --muted:#aab4e6;
  --accent:#6ee7ff;
  --shadow: 0 10px 24px rgba(0,0,0,.35);
  --radius: 16px;

  /* 레이아웃 높이 제어 */
  --header-h: 88px;
  --footer-h: 26px;

  /* ✅ 화면이 좁아지면 gap도 자동으로 줄어들게 */
  --gap: clamp(6px, 1.2vw, 10px);

  /* ✅ 카드 비율(필요하면 더 눌러서 1화면 유지) */
  --card-ratio-w: 3;
  --card-ratio-h: 4;
}

*{ box-sizing:border-box; }
html, body{ height:100%; }

body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", Arial, sans-serif;
  background:
    radial-gradient(1200px 700px at 30% 10%, rgba(110,231,255,.18), transparent 60%),
    radial-gradient(1000px 700px at 80% 30%, rgba(92,255,154,.10), transparent 55%),
    var(--bg);
  color:var(--text);

  /* ✅ 가로 삐져나오는 현상 방지 */
  overflow-x: hidden;
  overflow-y: hidden;
}

/* ================= HEADER ================= */

.header{
  /* ✅ max-width 때문에 좁은 화면에서 레이아웃이 틀어지는 걸 방지 */
  width: min(1100px, 100vw);
  margin:0 auto;
  padding:10px 14px 6px;
  height: var(--header-h);

  display:flex;
  gap:10px;
  justify-content:space-between;
  align-items:flex-start;
}

.title{
  min-width: 0;
}
.title h1{
  margin:0 0 4px;
  font-size: clamp(16px, 2vw, 18px);
  letter-spacing:-0.3px;
}
.title p{
  margin:0;
  font-size: clamp(11px, 1.4vw, 12px);
  color:var(--muted);
}

.hud{
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap;
  justify-content:flex-end;
}

.stat{
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.10);
  padding:6px 8px;
  border-radius: 12px;
  box-shadow: var(--shadow);
  display:flex;
  gap:6px;
  align-items:baseline;
}
.stat .label{
  font-size:11px;
  color:var(--muted);
}
.stat .value{
  font-size:14px;
  font-weight:800;
}
.stat .sub{
  font-size:11px;
  color:var(--muted);
}

.btn{
  cursor:pointer;
  border:none;
  color:#031018;
  background: linear-gradient(135deg, var(--accent), #b4ffdf);
  padding:7px 10px;
  border-radius: 12px;
  font-weight:800;
  box-shadow: var(--shadow);
}
.btn:disabled{
  opacity:.55;
  cursor:not-allowed;
}

/* ================= MAIN ================= */

.main{
  width: min(1100px, 100vw);
  margin:0 auto;
  padding:0 14px 8px;

  height: calc(100vh - var(--header-h) - var(--footer-h));
  display:flex;
  flex-direction:column;
  min-height:0; /* ✅ flex 내부 overflow 방지 */
}

.status{
  margin:6px 0 8px;
  padding:8px 10px;
  border-radius: var(--radius);
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.10);
  color:var(--muted);
  font-size:12px;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ================= BOARD ================= */
/* ✅ 10장(5쌍) → 5열 × 2행 고정, 대신 '줄어들 수 있게' 최소 너비 제한 해제 */

.board{
  flex:1;
  min-height:0;

  width: 100%;
  max-width: 100%;

  display:grid;
  gap: var(--gap);

  /* ✅ 핵심: minmax(0, 1fr)로 "최소 너비 0" 허용 → 가로 overflow 방지 */
  grid-template-columns: repeat(5, minmax(0, 1fr));
  grid-template-rows: repeat(2, minmax(0, 1fr));

  align-content: stretch;
  justify-content: stretch;
}

/* ================= CARD ================= */

.card{
  /* ✅ 핵심: grid 아이템이 줄어들도록 min-width:0 */
  min-width: 0;
  min-height: 0;

  width:100%;
  height:100%;
  perspective: 1000px;

  /* 카드가 좁아져도 비율 유지 */
  aspect-ratio: var(--card-ratio-w) / var(--card-ratio-h);
}

.card button{
  all:unset;
  cursor:pointer;
  width:100%;
  height:100%;
  display:block;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  transform-style: preserve-3d;
  transition: transform .28s ease;

  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;

  /* ✅ iOS에서 살짝 overflow/찢김 방지 */
  backface-visibility: hidden;
}

.card.is-flipped button,
.card.is-matched button{
  transform: rotateY(180deg);
}

.face{
  position:absolute;
  inset:0;
  border-radius: var(--radius);
  overflow:hidden;
  backface-visibility:hidden;
  border: 1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.07);
  display:flex;
  align-items:center;
  justify-content:center;
  padding: clamp(5px, 1vw, 8px);
}

.face.front{
  transform: rotateY(180deg);
}

.face img{
  width:100%;
  height:100%;
  object-fit:contain;
  max-width: 100%;
  max-height: 100%;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,.35));
}

.badge{
  position:absolute;
  bottom:6px;
  left:6px;
  right:6px;
  text-align:center;

  /* ✅ 화면 좁으면 글씨도 자동 축소 */
  font-size: clamp(9px, 1.2vw, 11px);
  padding:4px 6px;

  border-radius: 999px;
  background: rgba(0,0,0,.30);
  border: 1px solid rgba(255,255,255,.14);
  color: var(--text);

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ================= FOOTER ================= */

.footer{
  width: min(1100px, 100vw);
  margin:0 auto;
  padding:0 14px 6px;
  height: var(--footer-h);
  font-size:11px;
  color: rgba(233,238,255,.65);
}

/* ================= RESPONSIVE TUNING ================= */

/* ✅ 세로가 낮은 기기(가로모드/아이패드)에서는 카드 비율을 눌러서 "한 화면"을 더 확실히 */
@media (max-height: 700px){
  :root{
    --header-h: 76px;
    --card-ratio-w: 4;
    --card-ratio-h: 5;
  }
  .title p{ display:none; }
  .status{ display:none; }
}

/* ✅ 아주 작은 폭에서 5열이 너무 작아지는 경우: 그래도 5열 유지 + 카드 더 눌러서 대응 */
@media (max-width: 520px){
  :root{
    --card-ratio-w: 1;
    --card-ratio-h: 1; /* 정사각형에 가깝게 만들어서 작은 화면에서도 5열 유지 */
    --radius: 14px;
  }
}
